{% load static %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Find - Nova senha</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'mainpage/css/new_password.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" />
</head>

<body>

<div class="container d-flex justify-content-center align-items-center min-vh-100">
    <div class="card shadow login-card p-4">

        <h2 class="text-center fw-bold title-gradient">Nova senha üîê</h2>

        <p class="text-center text-muted mb-4">
            Digite sua nova senha abaixo
        </p>

        {% if validlink %}
        <form method="post">
            {% csrf_token %}

            {% for field in form %}
                <div class="mb-3">
                    <div class="input-group-custom">
                        <span class="material-symbols-rounded">lock</span>
                        
                        {{ field }}
                        
                    </div>
                    {% if field.errors %}
                        <div class="errorlist text-danger small ms-2">{{ field.errors|striptags }}</div>
                    {% endif %}
                </div>
            {% endfor %}

            <button type="submit" class="btn btn-primary w-100 mt-3 rounded-pill fw-bold">
                ALTERAR SENHA
            </button>
        </form>

        {% else %}
        <div class="text-center">
            <p class="text-danger">Este link √© inv√°lido ou j√° foi usado üòï</p>
            <a href="{% url 'password_reset' %}" class="btn btn-primary rounded-pill mt-3">Solicitar novo link</a>
        </div>
        {% endif %}

    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
        const pass1 = document.querySelector('input[name="new_password1"]');
        const pass2 = document.querySelector('input[name="new_password2"]');

        if(pass1) pass1.setAttribute('placeholder', 'Nova senha');
        if(pass2) pass2.setAttribute('placeholder', 'Confirme a nova senha');
    });
</script>

</body>
</html>